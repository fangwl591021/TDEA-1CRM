<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sports Island | 預約中心</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        :root { --brand-green: #06C755; --brand-bg: #f8fafc; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--brand-bg); font-size: 16px; }
        .nav-active { color: var(--brand-green); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .course-card { transition: all 0.2s; cursor: pointer; }
        .course-card:active { transform: scale(0.97); background-color: #f1f5f9; }
    </style>
</head>
<body class="pb-28">

    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-30 px-6 py-5 flex items-center justify-between border-b">
        <div class="flex items-center gap-3"><div class="w-9 h-9 bg-[#06C755] rounded-xl flex items-center justify-center font-bold text-white text-xl shadow-sm">S</div><h1 class="text-xl font-black italic tracking-tighter text-gray-800 uppercase">Sports Island</h1></div>
        <div id="statusIndicator" class="w-2.5 h-2.5 rounded-full bg-gray-300"></div>
    </header>

    <main id="viewArea">
        <!-- Home -->
        <div id="pageHome" class="tab-content active px-6 pt-6 animate-in fade-in duration-300">
            <div class="relative w-full h-44 rounded-3xl overflow-hidden shadow-xl mb-8"><img src="https://aiwe.cc/wp-content/uploads/2025/12/3486bc19dc6317e16bf4f1449ec52ae4.jpg" class="w-full h-full object-cover"><div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent flex flex-col justify-end p-8"><h2 class="text-white text-2xl font-black italic tracking-tight uppercase">Sports Island Center</h2><p class="text-green-300 text-[10px] font-black uppercase tracking-widest underline decoration-green-500 underline-offset-4">Active Life Hub</p></div></div>
            <div class="grid grid-cols-2 gap-5 mb-10"><button onclick="go('courses')" class="bg-white p-7 rounded-[1.5rem] shadow-sm border flex flex-col items-center gap-3 active:scale-95 transition-all"><div class="w-12 h-12 bg-green-50 text-green-500 rounded-full flex items-center justify-center"><i data-lucide="calendar"></i></div><span class="font-black text-sm uppercase text-slate-700">課程專區</span></button><button onclick="go('member')" class="bg-white p-7 rounded-[1.5rem] shadow-sm border flex flex-col items-center gap-3 active:scale-95 transition-all"><div class="w-12 h-12 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center"><i data-lucide="user"></i></div><span class="font-black text-sm uppercase text-slate-700">會員專區</span></button></div>
            <div class="mb-10"><h3 class="text-sm font-black uppercase tracking-widest flex items-center gap-2 mb-4 text-slate-800"><i data-lucide="megaphone" class="w-4 h-4 text-amber-500"></i> 最新消息</h3><div id="homeNews" class="space-y-4"></div></div>
            <div><h3 class="text-sm font-black uppercase tracking-widest flex items-center gap-2 mb-4 text-slate-800"><i data-lucide="zap" class="w-4 h-4 text-orange-500"></i> 近期推薦課程</h3><div id="homeCourses" class="space-y-5"></div></div>
        </div>

        <!-- Courses List -->
        <div id="pageCourses" class="tab-content px-6 pt-6 pb-20"><div class="bg-white p-5 rounded-2xl shadow-sm border mb-8 flex items-center gap-4"><i data-lucide="search" class="w-5 h-5 text-slate-300"></i><input type="text" placeholder="搜尋感興趣的課程..." class="flex-1 outline-none text-base bg-transparent font-medium"></div><div id="allCoursesList" class="space-y-5"></div></div>

        <!-- Member Profile -->
        <div id="pageMember" class="tab-content px-6 pt-6"><div class="bg-slate-900 p-10 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden mb-8"><div class="absolute -right-6 -top-6 w-32 h-32 bg-white/5 rounded-full blur-3xl"></div><p class="text-[10px] text-slate-500 font-black uppercase mb-2">Member Card</p><h2 class="text-3xl font-black tracking-tight mb-10 uppercase italic">Tony Wang</h2><div class="grid grid-cols-2 border-t border-white/10 pt-6"><div><p class="text-[8px] text-slate-500 font-black uppercase">Balance</p><p class="text-2xl font-black text-[#06C755]">1,250 PT</p></div><div><p class="text-[8px] text-slate-500 font-black uppercase">Level</p><p class="text-2xl font-black text-blue-400">GOLD</p></div></div></div></div>
    </main>

    <nav class="fixed bottom-0 inset-x-0 bg-white/90 backdrop-blur-xl border-t h-24 flex items-center justify-around z-50 px-4">
        <button onclick="go('home')" id="navHome" class="flex flex-col items-center gap-1.5 nav-active"><i data-lucide="home" class="w-7 h-7"></i><span class="text-[10px] font-black uppercase">首頁</span></button>
        <button onclick="go('courses')" id="navCourses" class="flex flex-col items-center gap-1.5 text-slate-300"><i data-lucide="calendar" class="w-7 h-7"></i><span class="text-[10px] font-black uppercase">找課程</span></button>
        <button onclick="go('member')" id="navMember" class="flex flex-col items-center gap-1.5 text-slate-300"><i data-lucide="user" class="w-7 h-7"></i><span class="text-[10px] font-black uppercase">我的</span></button>
    </nav>

    <script>
        const apiUrl = localStorage.getItem('sportflow_api_url') || '';
        window.onload = () => { lucide.createIcons(); if(apiUrl) { document.getElementById('statusIndicator').classList.replace('bg-gray-300','bg-[#06C755]'); sync(); } };
        function go(id) { document.querySelectorAll('.tab-content').forEach(p => p.classList.remove('active')); document.getElementById('page' + id.charAt(0).toUpperCase() + id.slice(1)).classList.add('active'); document.querySelectorAll('nav button').forEach(b => { b.classList.remove('nav-active'); b.classList.add('text-slate-300'); }); document.getElementById('nav' + id.charAt(0).toUpperCase() + id.slice(1)).classList.replace('text-slate-300', 'nav-active'); lucide.createIcons(); window.scrollTo({ top: 0, behavior: 'smooth' }); }
        async function sync() {
            try {
                const [annR, crsR] = await Promise.all([ fetch(`${apiUrl}?action=getAnnouncements`), fetch(`${apiUrl}?action=getCourses`) ]);
                const anns = await annR.json(); const crs = await crsR.json();
                document.getElementById('homeNews').innerHTML = anns.slice(0,3).reverse().map(a => `<div class="bg-white p-5 rounded-2xl border-l-[6px] border-l-amber-400 shadow-sm flex justify-between items-center"><p class="text-[13px] font-black text-slate-700 truncate mr-4">${a.title}</p><span class="text-[10px] text-slate-300 font-mono font-bold uppercase">${a.date}</span></div>`).join('');
                const renderCard = (c) => `<div class="course-card bg-white rounded-[1.5rem] shadow-sm border flex h-32 overflow-hidden"><div class="w-32 shrink-0 relative"><img src="${c.coverUrl || 'https://via.placeholder.com/200'}" class="w-full h-full object-cover"><div class="absolute top-0 left-0 bg-[#06C755] text-white text-[8px] font-black px-2.5 py-1 rounded-br-xl uppercase">${c.levelReq}</div></div><div class="flex-1 p-4 flex flex-col justify-center min-w-0"><h4 class="font-black text-slate-800 text-base truncate uppercase mb-1">${c.name}</h4><div class="text-[10px] text-slate-400 font-bold mb-0.5 tracking-tight flex items-center gap-1"><i data-lucide="map-pin" class="w-3 h-3 text-red-400"></i> ${c.venue || 'Sports Center'}</div><div class="text-[10px] text-slate-400 font-bold tracking-tight uppercase"><i data-lucide="user" class="w-3 h-3 text-blue-400 inline"></i> ${c.coach} | <i data-lucide="clock" class="w-3 h-3 text-orange-400 inline"></i> ${c.date}</div></div><div class="w-24 border-l p-4 flex flex-col justify-between items-center bg-slate-50/20 text-center"><p class="text-sm font-black text-red-500">$${c.earlyPrice || c.price}</p><button class="w-full py-2 bg-[#06C755] text-white rounded-xl text-[10px] font-black uppercase">Booking</button></div></div>`;
                document.getElementById('homeCourses').innerHTML = crs.slice(0,5).map(c => renderCard(c)).join('');
                document.getElementById('allCoursesList').innerHTML = crs.map(c => renderCard(c)).join(''); lucide.createIcons();
            } catch(e) {}
        }
    </script>
</body>
</html>
